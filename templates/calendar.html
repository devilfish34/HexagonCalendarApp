<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Work Order Calendar</title>
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
  <script src="https://unpkg.com/@popperjs/core@2"></script>
  <script src="https://unpkg.com/tippy.js@6"></script>
  <link rel="stylesheet" href="https://unpkg.com/tippy.js@6/themes/light.css" />
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <button id="toggle-sidebar" class="toggle-button">Hide Filters</button>
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <ul id="flash-container" class="flash-messages">
            {% for category, message in messages %}
              <li class="{{  category  }}">{{ message }}</li>
            {% endfor %}
          </ul>
        {% endif %}
      {% endwith %}
    <div id="main-container">
      <div id="sidebar">
        <form method="POST" enctype="multipart/form-data" class="upload-form">
        <label>Upload a new Excel File:</label>
        <input type="file" name="file" accept=".xlsx" required>
        <button type="submit">Upload</button>
        </form>
        <div class="legend">
          <strong>Legend:</strong><br>
          <span style="background-color: #218739;">Ready</span>
          <span style="background-color: #f59e0b;">Planning</span>
          <span style="background-color: #0d6efd;">Approved</span>
          <span style="background-color: #f4a261;">In Process</span>
          <span style="background-color: #e0e0e0;">Other</span>
        </div>
        <input type="text" id="search-input" class="search-box">
        <h4>Filter by Assignee</h4>
        <div>
          <button onclick="setAllCheckboxes('technician', true)">Select All</button>
          <button onclick="setAllCheckboxes('technician', false)">Deselect All</button>
        </div>
        <div id="filters-technician"></div>
        <h4>Filter by Status</h4>
        <div>
          <button onclick="setAllCheckboxes('status', true)">Select All</button>
          <button onclick="setAllCheckboxes('status', false)">Deselect All</button>
        </div>
        <div id="filters-status"></div>
        <h4>Filter by Building</h4>
        <div>
          <button onclick="setAllCheckboxes('building', true)">Select All</button>
          <button onclick="setAllCheckboxes('building', false)">Deselect All</button>
        </div>
        <div id="filters-building"></div>
      </div>
      <div id="summary-container" class="summary-container"></div>
      <div id="calendar"></div>
    </div>


<script src="{{ url_for('static', filename='calendar.js') }}" defer></script>
<script>
  window.addEventListener("DOMContentLoaded", function () {
    const flash = document.getElementById("flash-container");
    if (flash) {
      setTimeout(() => {
        flash.style.transition = "opacity 0.5s ease-out";
        flash.style.opacity = "0";
        setTimeout(() => flash.remove(), 500);
      }, 4000); // 4 seconds before fading out
    }
  });
</script>
</body>
</html>
